<%
var names = [],
    childrenIds = getChildrenIds(),
    longestName = 0,
    offset = 45,
    ownName = getAttribute('name'),
    borderColor = getRegistry('borderColor') || 'black',
    fillColor = getRegistry('color') || 'white',
    textColor = getRegistry('textColor') || 'black',
    child,
    i,
    height,
    width;

    for (i = 0; i < childrenIds.length; i += 1){
        child = getNode(childrenIds[i]);
        if (child) {
            names.unshift(child.getAttribute('name'));
            if (names[0].length > longestName) {
                longestName = names[0].length;
            }
        }
    }

    names = names.sort();
    width = 100;
    height = 100;
    radius = 45;
%>

<svg data-hidename="true" data-hideporttitle="true" xmlns="http://www.w3.org/2000/svg" width="<%=width%>" height="<%=height%>">
<circle cx="<%=width / 2%>" cy="<%=height / 2%>" r="<%= radius %>" stroke="black" stroke-width="3" fill="white" />
<%
if (names.length > 12){
%><text fill="<%= textColor%>" x="<%=width / 2%>" y="<%=height / 2%>" font-family="monospace" font-size="14" text-anchor="middle"><%=names.length%></text><%
}
else 
{
    if (names.length > 0){%><circle cx="<%=width / 2.7%>" cy="<%=height / 1.57%>" r="4" stroke="black" stroke-width="3" fill="black" /><% }
    if (names.length > 1){%><circle cx="<%=width / 4%>" cy="<%=height / 2%>" r="4" stroke="black" stroke-width="3" fill="black" /><% }
    if (names.length > 2){%><circle cx="<%=width / 2.7%>" cy="<%=height / 2%>" r="4" stroke="black" stroke-width="3" fill="black" /><% }
    if (names.length > 3){%><circle cx="<%=width / 1.3%>" cy="<%=height / 2%>" r="4" stroke="black" stroke-width="3" fill="black" /><% }
    if (names.length > 4){%><circle cx="<%=width / 1.57%>" cy="<%=height / 2%>" r="4" stroke="black" stroke-width="3" fill="black" /><% }
    if (names.length > 5){%><circle cx="<%=width / 2%>" cy="<%=height / 4%>" r="4" stroke="black" stroke-width="3" fill="black" /><%}
    if (names.length > 6){%><circle cx="<%=width / 2%>" cy="<%=height / 2.7%>" r="4" stroke="black" stroke-width="3" fill="black" /><%}
    if (names.length > 7){%><circle cx="<%=width / 2%>" cy="<%=height / 1.3%>" r="4" stroke="black" stroke-width="3" fill="black" /><%}
    if (names.length > 8){%><circle cx="<%=width / 2%>" cy="<%=height / 1.57%>" r="4" stroke="black" stroke-width="3" fill="black" /><%}
    if (names.length > 9){%><circle cx="<%=width / 1.3%>" cy="<%=height / 4%>" r="4" stroke="black" stroke-width="3" fill="black" /><%}
    if (names.length > 10){%><circle cx="<%=width / 1.57%>" cy="<%=height / 2.7%>" r="4" stroke="black" stroke-width="3" fill="black" /><%}
    if (names.length > 11){%><circle cx="<%=width / 4%>" cy="<%=height / 1.3%>" r="4" stroke="black" stroke-width="3" fill="black" /><%}
}
%>
</svg>